(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{109:function(e,n){},111:function(e,n){},120:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t.n(c),r=t(48),i=t.n(r),u=(t(58),t(3)),o=t(15),l=(t(59),t(49)),s=t.n(l),f=t(22),m=t.n(f),b=t(16);function d(){var e=Object(o.a)(["\n  border: 1px solid blue;\n  width: 50%;\n  height: 50%;\n"]);return d=function(){return e},e}function O(){var e=Object(o.a)(["\n  display: flex;\n  width: 100%;\n"]);return O=function(){return e},e}function j(){var e=Object(o.a)(["\n  height: 100vh;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n"]);return j=function(){return e},e}var v=b.a.div(j()),g=b.a.div(O()),h=b.a.video(d());var p=function(){var e,n,t,r=Object(c.useState)(""),i=Object(u.a)(r,2),o=i[0],l=i[1],f=Object(c.useState)({}),b=Object(u.a)(f,2),d=b[0],O=b[1],j=Object(c.useState)(),p=Object(u.a)(j,2),E=p[0],w=p[1],y=Object(c.useState)(!1),k=Object(u.a)(y,2),S=k[0],C=k[1],x=Object(c.useState)(""),D=Object(u.a)(x,2),I=D[0],U=D[1],M=Object(c.useState)(),R=Object(u.a)(M,2),A=R[0],B=R[1],J=Object(c.useState)(!1),P=Object(u.a)(J,2),W=P[0],T=P[1],V=Object(c.useState)(!0),$=Object(u.a)(V,2),q=($[0],$[1],Object(c.useRef)()),z=Object(c.useRef)(),F=Object(c.useRef)();return Object(c.useEffect)((function(){F.current=s.a.connect("/"),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){w(e),q.current&&(q.current.srcObject=e)})),F.current.on("yourID",(function(e){l(e)})),F.current.on("allUsers",(function(e){O(e)})),F.current.on("hey",(function(e){C(!0),U(e.from),B(e.signal)}))}),[]),E&&(e=a.a.createElement(h,{playsInline:!0,muted:!0,ref:q,autoPlay:!0})),W&&(n=a.a.createElement(h,{playsInline:!0,ref:z,autoPlay:!0})),S&&(t=a.a.createElement("div",null,a.a.createElement("h1",null,I," is calling you"),a.a.createElement("button",{onClick:function(){T(!0);var e=new m.a({initiator:!1,trickle:!1,stream:E});e.on("signal",(function(e){F.current.emit("acceptCall",{signal:e,to:I})})),e.on("stream",(function(e){z.current.srcObject=e})),e.signal(A)}},"Accept"))),a.a.createElement(v,null,a.a.createElement("button",{onClick:function(){q.current=null,navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){w(e),q.current&&(q.current.srcObject=e)}))}},"Video Off"),a.a.createElement(g,null,e,n),a.a.createElement(g,null,Object.keys(d).map((function(e){return e===o?null:a.a.createElement("button",{onClick:function(){return function(e){var n=new m.a({initiator:!0,trickle:!1,config:{iceServers:[{urls:"stun:numb.viagenie.ca",username:"sultan1640@gmail.com",credential:"98376683"},{urls:"turn:numb.viagenie.ca",username:"sultan1640@gmail.com",credential:"98376683"}]},stream:E});n.on("signal",(function(n){F.current.emit("callUser",{userToCall:e,signalData:n,from:o})})),n.on("stream",(function(e){z.current&&(z.current.srcObject=e)})),F.current.on("callAccepted",(function(e){T(!0),n.signal(e)}))}(e)}},"Call ",e)}))),a.a.createElement(g,null,t))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(p,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},53:function(e,n,t){e.exports=t(120)},58:function(e,n,t){},59:function(e,n,t){},85:function(e,n){}},[[53,1,2]]]);
//# sourceMappingURL=main.f836ffd2.chunk.js.map